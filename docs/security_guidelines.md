# セキュリティ・プライバシーガイドライン

**プロジェクト**: Article Quality Checker System (AQCS)  
**作成日**: 2025年09月06日  
**適用範囲**: 開発・テスト・運用の全段階

## 🔒 基本原則

### プライバシー保護の徹底
1. **実データの除外**: 特定クライアントの情報を一切含めない
2. **汎用化**: 全ての例示データを汎用サンプルに統一
3. **匿名化**: テストデータは完全に匿名化

### 機密情報の管理
1. **顧客情報の分離**: 本番データと開発データの完全分離
2. **アクセス制限**: 必要最小限の権限での運用
3. **データ保持期間**: 不要なデータの自動削除

## 📋 データ分類と取り扱い

### 機密度レベル
| レベル | データ種別 | 取り扱い |
|-------|------------|----------|
| **最高機密** | 実クライアント情報 | システムから完全除外 |
| **機密** | プロダクション設定 | 暗号化保存・限定アクセス |
| **限定公開** | 内部仕様・設計書 | チーム内のみ共有 |
| **公開** | 汎用サンプル・一般仕様 | 一般公開可能 |

### 禁止事項
```javascript
// ❌ 禁止：実データの使用
const realClientData = {
    "gid": "G1234567",  // 実際のクライアントID
    "client": "[サンプル]企業名",  // 実際の社名
    "title": "採用支援ツール..."  // 実際のタイトル
};

// ✅ 推奨：汎用サンプルの使用
const sampleData = {
    "gid": "G1234567",  // サンプルID
    "client": "[サンプル]企業名",  // 汎用名称
    "title": "[サンプル]業務効率化システムの導入方法"
};
```

## 🛡️ 開発段階でのセキュリティ

### コード管理
1. **リポジトリチェック**: コミット前の機密情報スキャン
2. **レビュープロセス**: 全プルリクエストでのセキュリティ確認
3. **自動検証**: CI/CDでの機密情報検出

### テストデータ管理
```javascript
// テストデータの標準形式
const testArticleTemplate = {
    gid: "G{{random_7_digits}}",
    client: "[テスト]{{company_type}}",
    metadata: {
        title: "[サンプル]{{generic_topic}}の{{action}}",
        targetKeywords: ["{{generic_keyword1}}", "{{generic_keyword2}}"],
    },
    content: {
        introduction: "{{generic_industry}}では{{generic_challenge}}が...",
        // ... 汎用的な内容のみ
    }
};
```

### 設定ファイル管理
```javascript
// ❌ 禁止：ハードコーディング
const apiKey = "sk-1234567890abcdef";

// ✅ 推奨：環境変数使用
const apiKey = process.env.API_KEY;

// 設定ファイルからの除外対象
const sensitivePatterns = [
    /password/i,
    /secret/i,
    /token/i,
    /key/i,
    /G\d{7}/,  // 実際のG-ID形式
    /[実際のクライアント名]/
];
```

## 📁 ファイル管理規則

### ファイル命名規則
```
✅ 適切な命名
- sample_article.json
- test_data_template.json
- generic_client_example.json

❌ 不適切な命名  
- jinius_article.json
- G1234567_data.json
- real_client_data.json
```

### .gitignore 設定
```gitignore
# 機密情報を含む可能性があるファイル
*.secret
*_real.*
*_production.*

# 実データファイル
G[0-9][0-9][0-9][0-9][0-9][0-9][0-9]_*
*jinius*
*_actual_*

# 環境設定
.env
.env.*
config/production.json

# テスト時の一時ファイル
temp_*
debug_*
test_output_*
```

## 🔍 監査・チェック項目

### 開発時チェックリスト
- [ ] **コード内機密情報**: 実データ・APIキー・パスワードの不存在
- [ ] **ファイル名**: 機密情報を含む名前の使用回避
- [ ] **コメント**: 実データを含むコメントの除去
- [ ] **ログ出力**: 機密情報のログ出力防止
- [ ] **エラーメッセージ**: 内部情報の漏洩防止

### テスト時チェックリスト
- [ ] **テストデータ**: 完全に匿名化されたデータのみ使用
- [ ] **テスト結果**: 実データの混入なし
- [ ] **キャッシュファイル**: 機密情報を含む一時ファイルの削除

### リリース前チェックリスト
- [ ] **全ファイルスキャン**: 機密情報の存在確認
- [ ] **環境変数**: 本番環境設定の分離確認
- [ ] **ドキュメント**: 実例の汎用サンプル化
- [ ] **ログ設定**: プロダクションログの安全性確認

## 🚨 インシデント対応

### 機密情報漏洩時の対応手順
1. **即座の対応**:
   - 該当ファイル・コミットの特定
   - 公開リポジトリからの削除
   - 影響範囲の調査

2. **修正対応**:
   - Git履歴からの完全削除
   - 関連ファイルの全面見直し
   - 再発防止策の実装

3. **報告・文書化**:
   - インシデント報告書作成
   - 対策内容の文書化
   - チーム内での情報共有

### 自動検出システム
```bash
# 機密情報検出スクリプト例
#!/bin/bash

# 実際のG-IDパターン検出
git log --all --full-history --grep="G[0-9]\{7\}"

# 特定クライアント名検出  
git log --all --full-history --grep="jinius"

# APIキーパターン検出
git log --all --full-history --grep="sk-[a-zA-Z0-9]\{20,\}"
```

## 📚 教育・トレーニング

### 開発者向けガイドライン
1. **セキュリティ意識**: 常に機密情報の取り扱いを意識
2. **サンプルデータ使用**: 実データの代替として汎用サンプルを活用
3. **定期確認**: 月次でのコード・ファイル見直し

### 汎用サンプル作成ルール
```javascript
// サンプルデータ作成の原則
const sampleCreationRules = {
    // ID生成：実在しない連番
    gid: () => `G${Math.floor(Math.random() * 9000000) + 1000000}`,
    
    // 企業名：業種 + 汎用名称
    companyName: () => `[サンプル]${randomIndustry()}${randomCompanySuffix()}`,
    
    // 記事タイトル：汎用的なトピック
    articleTitle: () => `[サンプル]${randomTopic()}の${randomAction()}`,
    
    // 避けるべき要素
    avoid: [
        "実際の企業名",
        "実際のサービス名", 
        "具体的な地名（東京、大阪等）",
        "実際の人名"
    ]
};
```

## ✅ コンプライアンス確認

### 法的要件への対応
- **個人情報保護法**: 個人を特定可能な情報の除外
- **企業秘密保護**: クライアント固有情報の非開示
- **データ保護規則**: 適切なデータ管理・保持期間遵守

### 監査対応
- **定期監査**: 四半期毎のセキュリティチェック
- **外部監査**: 年次での第三者による評価
- **改善計画**: 監査結果に基づく継続的改善

---

## 📞 連絡先・エスカレーション

### セキュリティ問題発見時
1. **緊急時**: 即座にチームリーダーに報告
2. **一般的な問題**: セキュリティ担当者に相談
3. **疑問・確認**: 本ガイドライン不明点の問い合わせ

### 更新・改善提案
- 本ガイドラインの更新提案
- 新しいセキュリティ要件の追加
- 運用上の課題・改善点の報告

---

**責任者**: セキュリティ担当チーム  
**更新頻度**: 四半期毎見直し  
**次回更新予定**: 2025年12月06日

このガイドラインに従い、安全で信頼性の高いシステム開発を実現します。